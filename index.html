<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>Simple Minecraft Walk</title>
  <style>
    body { margin: 0; overflow: hidden; }
    #info {
      position: absolute;
      top: 10px; left: 10px;
      color: white;
      font-family: sans-serif;
      background: rgba(0,0,0,0.5);
      padding: 5px 10px;
      border-radius: 5px;
      z-index: 10;
    }
  </style>
</head>
<body>
<div id="info">WASD — ходити | Стрілки ←↑→↓ — дивитись</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

<script>
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  const renderer = new THREE.WebGLRenderer();
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  const light = new THREE.HemisphereLight(0xffffff, 0x444444);
  scene.add(light);

  const material = new THREE.MeshLambertMaterial({ color: 0x55cc55 });
  for(let x = -10; x <= 10; x++) {
    for(let z = -10; z <= 10; z++) {
      const cube = new THREE.Mesh(new THREE.BoxGeometry(1,1,1), material);
      cube.position.set(x, -1, z);
      scene.add(cube);
    }
  }

  camera.position.set(0, 2, 5);
  let yaw = 0;   // Поворот вліво-вправо
  let pitch = 0; // Поворот вверх-вниз

  const keys = {};
  document.addEventListener('keydown', e => keys[e.code] = true);
  document.addEventListener('keyup', e => keys[e.code] = false);

  const velocity = new THREE.Vector3();

  function animate() {
    requestAnimationFrame(animate);

    // Рух камери WASD (відносно напрямку)
    const speed = 0.1;
    if(keys['KeyW']) {
      camera.position.x -= Math.sin(yaw) * speed;
      camera.position.z -= Math.cos(yaw) * speed;
    }
    if(keys['KeyS']) {
      camera.position.x += Math.sin(yaw) * speed;
      camera.position.z += Math.cos(yaw) * speed;
    }
    if(keys['KeyA']) {
      camera.position.x -= Math.cos(yaw) * speed;
      camera.position.z += Math.sin(yaw) * speed;
    }
    if(keys['KeyD']) {
      camera.position.x += Math.cos(yaw) * speed;
      camera.position.z -= Math.sin(yaw) * speed;
    }

    // Повороти камери стрілками
    const turnSpeed = 0.02;
    if(keys['ArrowLeft']) yaw += turnSpeed;
    if(keys['ArrowRight']) yaw -= turnSpeed;
    if(keys['ArrowUp']) pitch += turnSpeed;
    if(keys['ArrowDown']) pitch -= turnSpeed;

    // Обмежуємо pitch щоб не крутити голову назад
    pitch = Math.min(Math.max(pitch, -Math.PI/2), Math.PI/2);

    camera.rotation.set(pitch, yaw, 0);

    renderer.render(scene, camera);
  }

  animate();

  window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
</script>
</body>
</html>
